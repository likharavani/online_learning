<%= render "/shared/alert"%>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
  function myFunction(){
		console.log(<%= Progress.find_by(course_id:@course.id,user_id:current_user.id).pdf_watched+=1 %> )
		$.ajax({
			url: '/courses?id=2/count',
			type: 'GET',
			dataType: 'json',
			cache: false,
		
			success: function (color) {
					return color;
			},
			error: function () {
					alert('Error occured');
			}
		});
	console.log("you clicked me")

  console.log(<%= Progress.find_by(course_id:@course.id,user_id:current_user.id).pdf_watched %> ) 
	}
  
</script>
<div class="container p-4">
  <h1><%=@course.name%></h1>
  <p>Learn to code in Java — a robust programming language used to create software, web and mobile apps, and more.</p>
  <h4>About this cousrse</h4>
  <p>Popular for its versatility and ability to create a wide variety of applications, learning Java opens up your possibilities when coding. With it, you’ll be able to develop large systems, software, and mobile applications — and even create mobile apps for Android. Learn important Java coding fundamentals and practice your new skills with real-world projects.</p>
  <h4>Price : <%= @course.price %></h4>
  <%= @course.pdfs.first.name%>

  <h4>Syllabus</h4> 
 <%if user_signed_in?  && current_user.courses.find_by(name:@course.name)%>
    <p><%@list=@course.pdfs.first.path.split(",")%></p>
    <% @list.each_with_index do |li,index|%>
        <a href= <%= li %> target="_blank" style="text-decoration:none"
           onclick="myFunction()"> <%=@course.pdfs.first.name%> <%=index+1%></a><br>
    <%end%>

    <h4>Your progress:</h4>
    <p>Pdf watched: <%=@course.progress.first.pdf_watched%></p>
     <p>Course completion percentage out of 100 : <%=Progress.find_by(course_id:@course.id,user_id:current_user.id).percentage_completion%></p>
  <%else%>
     <p> you are not authorized to access this course</p>
     <%= link_to "Buy now" ,"/add?course_id=#{@course.id}",class: "btn btn-primary my-1"%>  
  <%end %>

 
  
</div>